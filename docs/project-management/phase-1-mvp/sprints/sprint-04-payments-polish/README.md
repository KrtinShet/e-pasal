# Sprint 4 - Payments and Polish

## Scope

- Sprint ID: SPR-04
- Duration: Weeks 7-8
- Goal: Integrate payments, notifications, analytics, and quality hardening before launch prep.

## Committed Stories

| Story ID | Story                                                                                                                                                            | Epic | Planned Window |
| -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---- | -------------- |
| E04-S01  | [eSewa checkout integration and payment adapter](../../epics/epic-04-payments-analytics-and-polish/stories/story-e04-s01-esewa-checkout-adapter/README.md)       | E04  | Week 7 Day 1-2 |
| E04-S02  | [eSewa webhook verification and reconciliation](../../epics/epic-04-payments-analytics-and-polish/stories/story-e04-s02-esewa-webhook-reconciliation/README.md)  | E04  | Week 7 Day 2-3 |
| E04-S06  | [Khalti payment provider implementation](../../epics/epic-04-payments-analytics-and-polish/stories/story-e04-s06-khalti-payment-provider/README.md)              | E04  | Week 7 Day 3-4 |
| E04-S03  | [Transactional email notifications](../../epics/epic-04-payments-analytics-and-polish/stories/story-e04-s03-email-notifications/README.md)                       | E04  | Week 7 Day 4-5 |
| E04-S04  | [Analytics API and dashboard insights](../../epics/epic-04-payments-analytics-and-polish/stories/story-e04-s04-analytics-dashboard/README.md)                    | E04  | Week 8 Day 1-2 |
| E04-S07  | [Fonepay QR payment provider](../../epics/epic-04-payments-analytics-and-polish/stories/story-e04-s07-fonepay-qr-provider/README.md)                             | E04  | Week 8 Day 1-2 |
| E04-S05  | [Mobile optimization and quality hardening](../../epics/epic-04-payments-analytics-and-polish/stories/story-e04-s05-mobile-optimization-and-hardening/README.md) | E04  | Week 8 Day 3-5 |
| E04-S08  | [Payment infrastructure and merchant config](../../epics/epic-04-payments-analytics-and-polish/stories/story-e04-s08-payment-infrastructure/README.md)           | E04  | Week 8 Day 3-5 |

## Exit Criteria

- [ ] eSewa payments work end-to-end.
- [ ] Khalti payments work end-to-end in sandbox.
- [ ] Fonepay QR payments work end-to-end.
- [ ] Email notifications are sending.
- [ ] Core analytics are available in dashboard.
- [ ] Integration settings page allows merchants to configure payment and logistics providers.
- [ ] Credentials stored encrypted, storefront shows only enabled payment methods.
- [ ] No critical bugs remain open.

## Detailed Plan

- [Execution Plan](./execution-plan.md)
